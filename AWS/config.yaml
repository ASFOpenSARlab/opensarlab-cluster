# This helm config file modifies the defaults found in zero-to-jupyterhub-k8s/jupyterhub/
# Possible values are scattered throughout the doc starting at https://z2jh.jupyter.org/en/latest/setup-jupyterhub.html

# Proxy token can be recreated via `openssl rand -hex 32`. This token isn't really used anywhere else so I'm not sure of the security concerns.
proxy:
  secretToken: fc097874c87cc7af8aa0fd47bf7a05baf937a3fdd9afc8d7e48242eaba4a8952

auth:
  admin:
    users:
      - emlundell
      - khogenso
  whitelist:
    users:
      - emlundell
      - khogenso
      - s1
      - s2
      - s3
      - s4
      - s5
      - s6
      - s7
      - s8
      - s9
      - s10
      - s11
      - s12
      - s13
      - s14
      - s15
      - s16
      - s17
      - s18
      - s19
      - s20
      - s21
      - s22
      - s23
  dummy:
    password: "sariscool"  # This password will be shared among all users.

singleuser:
  image:
    name: 553778890976.dkr.ecr.us-east-1.amazonaws.com/asf-franz-labs
    tag: build.7
  extraEnv:
    AWS_ACCESS_KEY_ID: "AKIAJKMUJ4GJWSDOUQSA"
    AWS_SECRET_ACCESS_KEY: "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"
  lifecycleHooks:
    postStart:
      exec:
        # When the jupyterhub server mounts the EBS volumes to $HOME, it "deletes" anything in that directory.
        # The volumes cannot be mounted anywhere else.
        # Thus hidden directories for condas and other programs when originally built will get destroyed.
        # This hook takes copies of those files (safely moved during the image build) and copies them back to $HOME.
        command: ["cp", "-r", "/home/commons/.", "/home/jovyan/"]

# Always pull the latest image when the Helm chart is updated
prePuller:
  continuous:
    enabled: true
  hook:
     enabled: true
