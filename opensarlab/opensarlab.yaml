---

parameters:
  code_commit_repo_name: osl-daac-test-cluster
  code_commit_branch_name: main
  cost_tag_key: osl-billing
  cost_tag_value: osl-daac-test
  admin_user_name: emlundell_test1
  admin_email_address: emlundell@alaska.edu
  admin_email_address_sns_arn: arn:aws:ses:us-west-2:701288258305:identity/emlundell@alaska.edu
  certificate_arn: arn:aws:acm:us-west-2:701288258305:certificate/f4d36bbc-f7d4-4143-a5d3-9e0ec96324dd
  container_namespace: osl-daac-test-container
  deployment_url: load balancer
  az_suffix: a
  
  # Optional
  ical_url: https://calendar.google.com/calendar/ical/c_90n3vfk860on0v1kl0fqcj2nss%40group.calendar.google.com/public/basic.ics
  user_whitelist_bucket: osl-user-whitelists
  user_whitelist_csv: unavco_2021_users.csv

nodes:
  - name: hub
    instance: t3a.medium
    min_number: 1
    max_number: 2
    node_policy: hub
    is_hub: True

  - name: sar1
    instance: m5a.2xlarge
    min_number: 0
    max_number: 25
    node_policy: user

  - name: sar2
    instance: m5a.8xlarge
    min_number: 0
    max_number: 25
    node_policy: user

  - name: gpu
    instance: p3.2xlarge
    min_number: 0
    max_number: 3
    node_policy: user
    is_gpu: True

profiles:
  - name: SAR 1
    description: "Formerly the General CPU option. Contains basic SAR processing packages: ARIA, ISCE, MintPy, MapReady, TRAIN. CPU limit: 8. RAM limit: 16G. Storage: 500G."
    image_name: sar
    image_tag: b1f4e84
    hook_script: sar.sh
    memory_guarantee: 6G
    memory_limit: 16G
    storage_capacity: 500Gi
    node_name: sar1
    delete_user_volumes: False

  - name: SAR 1 - Test
    description: "Formerly the General CPU option. Contains basic SAR processing packages: ARIA, ISCE, MintPy, MapReady, TRAIN. CPU limit: 8. RAM limit: 16G. Storage: 500G."
    image_name: sar
    image_tag: b1f4e84
    hook_script: sar_test.sh
    memory_guarantee: 6G
    memory_limit: 16G
    storage_capacity: 500Gi
    node_name: sar1

  - name: SAR 1 - No Pull
    description: "Development profile. CPU limit: 8. RAM limit: 16G. Storage: 500G"
    image_name: sar
    image_tag: b1f4e84
    hook_script: None
    memory_guarantee: 6G
    memory_limit: 16G
    storage_capacity: 500Gi
    node_name: sar1

  - name: SAR 2
    description: "Formally UNAVCO. Contains basic SAR processing packages on a bigger machine. RAM limit: 96G. CPU limit: 8 cpus. Storage: 500 GiB."
    image_name: sar
    image_tag: b1f4e84
    hook_script: sar.sh
    memory_guarantee: 32G
    memory_limit: 96G
    cpu_limit: 8
    storage_capacity: 500Gi
    node_name: sar2

  - name: SAR 2 - Max
    description: "Similar to SAR 2 but one person per machine. RAM limit: ~128GB. CPU limit: ~30 cpus. Storage: 500 GiB."
    image_name: sar
    image_tag: b1f4e84
    hook_script: sar.sh
    cpu_guarantee: 30
    storage_capacity: 500Gi
    node_name: sar2
    delete_user_volumes: None
